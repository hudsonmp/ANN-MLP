(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{8948:(e,t,n)=>{Promise.resolve().then(n.bind(n,6158))},6158:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>y});var l=n(5155),i=n(2115);function r(e,t,n,l=e=>e){return e*l(.5-t*(.5-n))}function s(e,t){return[e[0]+t[0],e[1]+t[1]]}function a(e,t){return[e[0]-t[0],e[1]-t[1]]}function o(e,t){return[e[0]*t,e[1]*t]}function c(e){return[e[1],-e[0]]}function u(e,t){return e[0]*t[0]+e[1]*t[1]}function d(e,t){var n;return(n=a(e,t))[0]*n[0]+n[1]*n[1]}function h(e){var t;return t=Math.hypot(e[0],e[1]),[e[0]/t,e[1]/t]}function f(e,t,n){let l=Math.sin(n),i=Math.cos(n),r=e[0]-t[0],s=e[1]-t[1];return[r*i-s*l+t[0],r*l+s*i+t[1]]}function g(e,t,n){return s(e,o(a(t,e),n))}var{min:p,PI:x}=Math,m=x+1e-4;function v(e){let{onPredict:t}=e,n=(0,i.useRef)(null),[x,v]=(0,i.useState)(!1),[y,w]=(0,i.useState)([]),[b,j]=(0,i.useState)(!1);(0,i.useEffect)(()=>{let e=n.current;if(!e)return;let t=e.getContext("2d");t&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height),e.style.touchAction="none")},[]);let N=(e,t)=>{let n=function(e,t={}){return function(e,t={}){var n,l;let{size:i=16,smoothing:x=.5,thinning:v=.5,simulatePressure:y=!0,easing:w=e=>e,start:b={},end:j={},last:N=!1}=t,{cap:M=!0,easing:C=e=>e*(2-e)}=b,{cap:k=!0,easing:S=e=>--e*e*e+1}=j;if(0===e.length||i<=0)return[];let L=e[e.length-1].runningLength,P=!1===b.taper?0:!0===b.taper?Math.max(i,L):b.taper,R=!1===j.taper?0:!0===j.taper?Math.max(i,L):j.taper,E=Math.pow(i*x,2),z=[],T=[],D=e.slice(0,10).reduce((e,t)=>{let n=t.pressure;if(y){let l=p(1,t.distance/i),r=p(1,1-l);n=p(1,e+.275*l*(r-e))}return(e+n)/2},e[0].pressure),_=r(i,v,e[e.length-1].pressure,w),A,B=e[0].vector,F=e[0].point,O=F,X=F,Y=O,I=!1;for(let t=0;t<e.length;t++){let{pressure:n}=e[t],{point:l,vector:h,distance:x,runningLength:b}=e[t];if(t<e.length-1&&L-b<3)continue;if(v){if(y){let e=p(1,x/i),t=p(1,1-e);n=p(1,D+.275*e*(t-D))}_=r(i,v,n,w)}else _=i/2;void 0===A&&(A=_),_=Math.max(.01,_*Math.min(b<P?C(b/P):1,L-b<R?S((L-b)/R):1));let j=(t<e.length-1?e[t+1]:e[t]).vector,N=t<e.length-1?u(h,j):1,M=0>u(h,B)&&!I,k=null!==N&&N<0;if(M||k){let e=o(c(B),_);for(let t=1/13,n=0;n<=1;n+=t)X=f(a(l,e),l,m*n),z.push(X),Y=f(s(l,e),l,-(m*n)),T.push(Y);F=X,O=Y,k&&(I=!0);continue}if(I=!1,t===e.length-1){let e=o(c(h),_);z.push(a(l,e)),T.push(s(l,e));continue}let H=o(c(g(j,h,N)),_);X=a(l,H),(t<=1||d(F,X)>E)&&(z.push(X),F=X),Y=s(l,H),(t<=1||d(O,Y)>E)&&(T.push(Y),O=Y),D=n,B=h}let H=e[0].point.slice(0,2),U=e.length>1?e[e.length-1].point.slice(0,2):s(e[0].point,[1,1]),J=[],V=[];if(1===e.length){if(!(P||R)||N){let e=(n=h(c(a(H,U))),s(H,o(n,-(A||_)))),t=[];for(let n=1/13,l=n;l<=1;l+=n)t.push(f(e,H,2*m*l));return t}}else{if(!(P||R&&1===e.length)){if(M)for(let e=1/13,t=e;t<=1;t+=e){let e=f(T[0],H,m*t);J.push(e)}else{let e=a(z[0],T[0]),t=o(e,.5),n=o(e,.51);J.push(a(H,t),a(H,n),s(H,n),s(H,t))}}let t=c([-(l=e[e.length-1].vector)[0],-l[1]]);if(R||P&&1===e.length)V.push(U);else if(k){let e=s(U,o(t,_));for(let t=1/29,n=t;n<1;n+=t)V.push(f(e,U,3*m*n))}else V.push(s(U,o(t,_)),s(U,o(t,.99*_)),a(U,o(t,.99*_)),a(U,o(t,_)))}return z.concat(V,T.reverse(),J)}(function(e,t={}){var n,l,i;let{streamline:r=.5,size:o=16,last:c=!1}=t;if(0===e.length)return[];let u=.15+(1-r)*.85,d=Array.isArray(e[0])?e:e.map(({x:e,y:t,pressure:n=.5})=>[e,t,n]);if(2===d.length){let e=d[1];d=d.slice(0,-1);for(let t=1;t<5;t++)d.push(g(d[0],e,t/4))}1===d.length&&(d=[...d,[...s(d[0],[1,1]),...d[0].slice(2)]]);let f=[{point:[d[0][0],d[0][1]],pressure:d[0][2]>=0?d[0][2]:.25,vector:[1,1],distance:0,runningLength:0}],p=!1,x=0,m=f[0],v=d.length-1;for(let e=1;e<d.length;e++){let t=c&&e===v?d[e].slice(0,2):g(m.point,d[e],u);if((l=m.point)[0]===t[0]&&l[1]===t[1])continue;let n=(i=m.point,Math.hypot(t[1]-i[1],t[0]-i[0]));if(x+=n,e<v&&!p){if(x<o)continue;p=!0}m={point:t,pressure:d[e][2]>=0?d[e][2]:.5,vector:h(a(m.point,t)),distance:n,runningLength:x},f.push(m)}return f[0].vector=(null==(n=f[1])?void 0:n.vector)||[0,0],f}(e,t),t)}(t,{size:16,thinning:.5,smoothing:.5,streamline:.5});for(let[t,l]of(e.fillStyle="black",e.beginPath(),n))e.lineTo(t,l);e.fill()},M=function(e,t){let l=arguments.length>2&&void 0!==arguments[2]?arguments[2]:.5;w(i=>{let r=[...i,{x:e,y:t,pressure:l}],s=n.current;if(!s)return r;let a=s.getContext("2d");return a&&(a.fillStyle="white",a.fillRect(0,0,s.width,s.height),N(a,r)),r})},C=e=>{let t,l;let i=n.current;if(!i)return;let r=i.getBoundingClientRect();"touches"in e?(t=e.touches[0].clientX-r.left,l=e.touches[0].clientY-r.top):(t=e.clientX-r.left,l=e.clientY-r.top),v(!0),M(t,l)},k=e=>{let t,l;if(!x)return;let i=n.current;if(!i)return;let r=i.getBoundingClientRect();"touches"in e?(e.preventDefault(),t=e.touches[0].clientX-r.left,l=e.touches[0].clientY-r.top):(t=e.clientX-r.left,l=e.clientY-r.top),M(t,l)},S=()=>{v(!1)},L=async()=>{if(0===y.length)return;j(!0);let e=n.current;if(e)try{let n=e.toDataURL("image/png");await t(n)}finally{j(!1)}};return(0,l.jsxs)("div",{className:"flex flex-col items-center gap-6",children:[(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)("canvas",{ref:n,width:280,height:280,className:"bg-white rounded-2xl shadow-lg transition-all duration-300 ease-in-out hover:shadow-xl border-2 border-gray-100 touch-none",onMouseDown:C,onMouseMove:k,onMouseUp:S,onMouseLeave:S,onTouchStart:C,onTouchMove:k,onTouchEnd:S}),0===y.length&&(0,l.jsx)("div",{className:"absolute inset-0 flex items-center justify-center text-gray-400 pointer-events-none",children:"Draw a digit here"})]}),(0,l.jsxs)("div",{className:"flex gap-4",children:[(0,l.jsx)("button",{onClick:()=>{let e=n.current;if(!e)return;let t=e.getContext("2d");t&&(t.fillStyle="white",t.fillRect(0,0,e.width,e.height),w([]))},disabled:0===y.length||b,className:"px-6 py-2.5 text-sm font-medium text-gray-700 bg-gray-100 rounded-full transition-all duration-300 ease-in-out hover:bg-gray-200 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2",children:"Clear"}),(0,l.jsx)("button",{onClick:L,disabled:0===y.length||b,className:"px-6 py-2.5 text-sm font-medium text-white bg-blue-600 rounded-full transition-all duration-300 ease-in-out hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-offset-2 flex items-center gap-2",children:b?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("svg",{className:"animate-spin h-4 w-4",viewBox:"0 0 24 24",children:[(0,l.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4",fill:"none"}),(0,l.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):"Predict"})]})]})}function y(){let[e,t]=(0,i.useState)(null),[n,r]=(0,i.useState)(null),s=async e=>{try{r(null);let n=await fetch("".concat("http://localhost:8000","/api/predict/"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({image:e})});if(!n.ok){let e=await n.json().catch(()=>null);throw Error((null==e?void 0:e.error)||"Failed to get prediction (HTTP ".concat(n.status,")"))}let l=await n.json();if(!l.digit&&0!==l.digit)throw Error("Invalid prediction result");t(l)}catch(e){console.error("Prediction error:",e),r(e instanceof Error?e.message:"Failed to connect to the prediction service. Please try again."),t(null)}};return(0,l.jsx)("main",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:(0,l.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-16 sm:px-6 lg:px-8",children:[(0,l.jsxs)("div",{className:"text-center mb-12",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold tracking-tight text-gray-900 sm:text-5xl md:text-6xl mb-4",children:"Digit Recognition"}),(0,l.jsx)("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Draw any digit from 0 to 9, and watch as our AI instantly recognizes it. Experience the power of machine learning in real-time."})]}),(0,l.jsx)("div",{className:"bg-white rounded-3xl shadow-xl p-8 mb-8 transition-all duration-300 hover:shadow-2xl",children:(0,l.jsx)(v,{onPredict:s})}),(0,l.jsxs)("div",{className:"space-y-6",children:[e&&(0,l.jsx)("div",{className:"bg-white rounded-2xl p-8 shadow-lg transition-all duration-300",children:(0,l.jsxs)("div",{className:"text-center",children:[(0,l.jsx)("span",{className:"text-7xl font-bold text-blue-600 block mb-4 animate-fade-in",children:e.digit}),(0,l.jsxs)("div",{className:"flex items-center justify-center gap-2",children:[(0,l.jsx)("div",{className:"h-2 w-full max-w-md bg-gray-200 rounded-full overflow-hidden",children:(0,l.jsx)("div",{className:"h-full bg-blue-600 rounded-full transition-all duration-1000 ease-out",style:{width:"".concat(100*e.confidence,"%")}})}),(0,l.jsxs)("span",{className:"text-sm font-medium text-gray-600 min-w-[4rem]",children:[(100*e.confidence).toFixed(1),"%"]})]}),(0,l.jsx)("p",{className:"mt-2 text-gray-600",children:"Confidence Level"})]})}),n&&(0,l.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-2xl p-6",children:(0,l.jsxs)("div",{className:"flex items-center gap-3",children:[(0,l.jsx)("svg",{className:"h-5 w-5 text-red-600",viewBox:"0 0 20 20",fill:"currentColor",children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),(0,l.jsx)("p",{className:"text-red-600 font-medium",children:n})]})})]})]})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[441,517,358],()=>t(8948)),_N_E=e.O()}]);